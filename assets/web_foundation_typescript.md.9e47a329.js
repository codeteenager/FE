import{_ as s,c as a,o as n,a as l}from"./app.9879908b.js";const p="/FE/web/34.png",d=JSON.parse('{"title":"TypeScript","description":"","frontmatter":{},"headers":[{"level":2,"title":"强类型和弱类型","slug":"强类型和弱类型","link":"#强类型和弱类型","children":[]},{"level":2,"title":"静态类型与动态类型","slug":"静态类型与动态类型","link":"#静态类型与动态类型","children":[]},{"level":2,"title":"JavaScript类型系统特征","slug":"javascript类型系统特征","link":"#javascript类型系统特征","children":[]},{"level":2,"title":"弱类型的问题","slug":"弱类型的问题","link":"#弱类型的问题","children":[]},{"level":2,"title":"强类型的优势","slug":"强类型的优势","link":"#强类型的优势","children":[]},{"level":2,"title":"Flow","slug":"flow","link":"#flow","children":[]},{"level":2,"title":"TypeScript","slug":"typescript-1","link":"#typescript-1","children":[]},{"level":2,"title":"TS配置文件","slug":"ts配置文件","link":"#ts配置文件","children":[]}],"relativePath":"web/foundation/typescript.md","lastUpdated":1671635276000}'),e={name:"web/foundation/typescript.md"},o=l(`<h1 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-hidden="true">#</a></h1><p>TypeScript是一门基于JavaScript之上的编程语言，它重点解决了JavaScript的自有类型系统的不足，通过TypeScript可以大大提高代码的可靠程度。</p><h2 id="强类型和弱类型" tabindex="-1">强类型和弱类型 <a class="header-anchor" href="#强类型和弱类型" aria-hidden="true">#</a></h2><p>从类型安全的角度，编程语言分为强类型和弱类型， 这种强弱类型的概念最早是1974年的时候美国两个计算机专家Liskov,Zilles提出的。当时对强类型定义的概念就是在语言层面限制函数的实参类型必须与形参类型相同。例如有一个foo函数，它需要接收一个整型的参数，当我们调用的时候不允许传入其他类型的值。</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Main</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">num</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        Main</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//ok</span></span>
<span class="line"><span style="color:#A6ACCD;">        Main</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//error &quot;100&quot; is a string</span></span>
<span class="line"><span style="color:#A6ACCD;">        Main</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Integer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parseInt</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//ok</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>而弱类型完全相反，在语言层面不会限制实参的类型，即便参数为整型的，在调用时可以传入任意类型的数据，语法上不会报错，运行上可能会有点问题。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">foo</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">num</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">num</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//ok</span></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//ok</span></span>
<span class="line"><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">parseInt</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">// ok</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>由于这种强弱之分根本不是某一个权威机构的定义，而且当时两位专家也未给出具体的规则，这就导致后人对这种界定方式的细节出现了一些不一样的理解，但是整体上大家界定方式都是强类型有更强的类型约束，而弱类型几乎没有什么约束。那么个人的理解就是强类型语言中不允许任意的隐式类型转换，而弱类型语言则允许任意的数据隐式类型转换。变量类型允许随时改变的特点，不是强弱类型的差异。例如python是强类型的语言。</p><h2 id="静态类型与动态类型" tabindex="-1">静态类型与动态类型 <a class="header-anchor" href="#静态类型与动态类型" aria-hidden="true">#</a></h2><p>从类型检查的角度，将编程语言分为静态类型和动态类型。对于静态类型语言它的表现就是一个变量声明时它的类型就是明确的，而且在声明过后，它的类型就不允许再修改。相反，动态类型语言的特点就是在运行阶段才能够明确变量类型，而且变量的类型能够随时发生变化，也可以说在动态语言中它的变量没有类型，变量中存放的值是有类型的。那么JavaScript就是一门动态类型的语言。</p><h2 id="javascript类型系统特征" tabindex="-1">JavaScript类型系统特征 <a class="header-anchor" href="#javascript类型系统特征" aria-hidden="true">#</a></h2><p>由于JavaScript是一门弱类型而且是动态类型的语言，语言本身的类型系统是薄弱的，甚至可以说JavaScript根本没有类型系统，所以说它是极其灵活多变的。同时它也丢掉了类型系统的可靠性，我们在代码中的每一个变量都要去担心是不是想要的类型。</p><p>那么为什么JavaScript不是一门强类型/静态类型的语言呢？首先，早期的JavaScript应用非常简单，很多时候几百行代码，甚至几十行代码就搞定了，这个时候类型系统就很麻烦。其次，JavaScript是一门脚本语言，脚本语言的特点是不需要编译，直接在运行环境当中去运行，换句话说JavaScript是没有编译环节的，即便把它设计成静态类型语言也没有意义。因为静态类型语言需要在编译阶段进行类型检查，而JavaScript根本没有这样的环节。所以JavaScript就形成了灵活多变的弱类型/动态类型语言。</p><p>这在以前那个时候是没有什么问题的，而现如今前端都是大规模的应用，JavaScript代码越来越复杂，开发周期越来越长，在大规模应用下，JavaScript这种优势就变成了短板。</p><h2 id="弱类型的问题" tabindex="-1">弱类型的问题 <a class="header-anchor" href="#弱类型的问题" aria-hidden="true">#</a></h2><p>例如我们调用了obj不存在的foo方法，在语法层面这么写是没有问题的，而在运行的时候就会报错。而且有时候它在某个时间运行。例如放在setTimeout回调函数中，延迟一段时间执行。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">foo</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果是强类型的话，会在语法上报错误。</p><p>第二个例子，我们定义了一个计算两个数和的函数，如果我们传入两个数字的话，这个函数调用正常。如果我们传入其中一个参数为字符串，这个时候，该函数的作用完全发生了变化，它会返回两个字符串连接过后的结果。这就是类型不确定造成的典型问题。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">b</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>第三个例子，我们给对象添加属性，对象的属性名只能是字符串或者ES6中的Symbol，但是由于JavaScript是弱类型的，所以我们索引器的时候使用任意类型的值作为属性，而在它的内部会自动转换成字符串。强类型则不会有这种问题。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span></span>
<span class="line"><span style="color:#A6ACCD;">obj[</span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(obj[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>所以弱类型的弊端是十分明显的，在代码上可以通过约定来规避，但是大项目则会有问题。强类型语言的优势就体现出来了。</p><h2 id="强类型的优势" tabindex="-1">强类型的优势 <a class="header-anchor" href="#强类型的优势" aria-hidden="true">#</a></h2><p>强类型的优势可以总结四个方面：</p><ul><li>错误更早暴露，也就是在编码方面可以消灭一大部分的类型异常问题，不用等到运行阶段再去查找错误。</li><li>强类型的代码更加智能，编码更准确。因为弱类型的无法推断出对象有哪些成员，导致获取对象的成员属性没有提示，导致编写错误。而强类型的可以。</li><li>重构更牢靠。在对象的属性名发生变化，在重新编译时就会检查出问题，可以轻松定位所有使用该成员属性的地方。</li><li>减少代码层面不必要的类型判断，JavaScript是弱类型，我们在使用方法参数的时候，不可避免的去判断参数类型。如果是强类型，则不需要这种判断。</li></ul><h2 id="flow" tabindex="-1">Flow <a class="header-anchor" href="#flow" aria-hidden="true">#</a></h2><p><a href="https://flow.org/" target="_blank" rel="noreferrer">Flow</a>是JavaScript静态类型检查器，它是2014年由facebook推出的一款工具，使用它可以弥补JavaScript弱类型所带来的弊端，可以说它给JavaScript提供了更完善的类型系统，目前在React、Vue项目中都可以看到Flow的使用。它的工作原理就是在代码中添加类型注解的方式，来去标记变量或者是参数是什么类型的，然后Flow就会根据这些类型注解检查代码当中是否会存在类型使用上的异常，从而实现开发阶段类型的检查。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">a</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">b</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">a</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例如上述在a后面加上:number这种方式就叫做类型注解，表示该成员必须要接收number类型的值。在代码中添加的这种额外类型注解可以在运行之前通过babel或Flow官方提供的模块自动去除，所以在生产环境不会有影响。Flow只是一个小工具，而TypeScript则是一门语言。</p><h2 id="typescript-1" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript-1" aria-hidden="true">#</a></h2><p><a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noreferrer">TypeScript</a>是基于JavaScript基础之上的编程语言，很多时候我们都说它是JavaScript的超集或扩展集，那多出来的就是更强大的类型系统以及ECMAScript新特性的支持，它最终会编译为原始的JavaScript。 <img src="`+p+'" alt=""></p><p>另外，因为TypeScript最终会编译成JavaScript，所以任何一种JavaScript运行环境下的应用程序都可以使用TypeScript来开发，例如浏览器应用、Node应用、React Native以及Electron应用。</p><p>它作为一门编程语言，功能更加强大，生态也更健全、更完善。目前很多大型开源项目都采用TypeScript来开发，例如Angular、Vue.js3.0。TypeScript可以说是前端领域的第二语言，如果是小项目可以采用JavaScript灵活使用，如果是长周期的大项目，那么建议采用TypeScript来进行开发。</p><p>有优点也会有缺点，TypeScript的缺点就是这门语言相比较JavaScript多了很多概念，例如接口、泛型、枚举等等。这些概念会提高学习成本，但是TypeScript是渐进式的，即便我们不明白这些特性，依旧可以当做JavaScript来使用。其次在项目初期，TypeScript会增加一些项目成本，因为在项目初期我们会编写很多的类型声明，比如对象和函数有很多类型声明去编写。但是对大型项目则编写这些是一劳永逸的，这些成本也不算什么。TypeScript在前端发展过程中是必要的一门编程语言。</p><h2 id="ts配置文件" tabindex="-1">TS配置文件 <a class="header-anchor" href="#ts配置文件" aria-hidden="true">#</a></h2><p>我们可以使用<code>tsc --init</code>来初始化ts的配置文件tsconfig.json，该配置中有compilerOptions属性，这个属性就是TypeScript编译器对应的配置选项。其中绝大多数配置都被注释掉了，而且附有一些说明。例如：</p><ul><li>target：设置编译后的ECMAScript的标准</li><li>module：输出的代码采用什么样的模块化方式</li><li>outDir：设置输出结果的文件夹目录</li><li>rootDir：设置源代码即TypeScript的文件夹目录</li><li>sourceMap：开启源代码映射，调试的时候可以调试TypeScript源代码</li><li>strict：严格模式，开启所有严格类型检查，要为每一个成员指定明确的类型，不允许不写类型而隐式推断为any这种情况</li></ul><p>当我们使用tsc编译某一个文件的时候，配置文件是不生效的，而当我们使用tsc编译整个项目的时候tsc才生效。</p>',39),t=[o];function r(c,i,y,D,F,A){return n(),a("div",null,t)}const u=s(e,[["render",r]]);export{d as __pageData,u as default};
